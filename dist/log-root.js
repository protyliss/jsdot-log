"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const $colors = {
    reset: '\x1b[0m',
    bright: '\x1b[1m',
    dim: '\x1b[2m',
    underscore: '\x1b[4m',
    blink: '\x1b[5m',
    reverse: '\x1b[7m',
    hidden: '\x1b[8m',
    black: '\x1b[30m',
    red: '\x1b[31m',
    green: '\x1b[32m',
    yellow: '\x1b[33m',
    blue: '\x1b[34m',
    magenta: '\x1b[35m',
    cyan: '\x1b[36m',
    white: '\x1b[37m',
    bgBlack: '\x1b[40m',
    bgRed: '\x1b[41m',
    bgGreen: '\x1b[42m',
    bgYellow: '\x1b[43m',
    bgBlue: '\x1b[44m',
    bgMagenta: '\x1b[45m',
    bgCyan: '\x1b[46m',
    bgWhite: '\x1b[47m'
};
const { reset } = $colors;
const _colorWrap = /\(([a-z.]+):(.+)\)/g;
const _colorArrow = /^([a-z.]+)=>$/;
class LogRoot {
    constructor(_parent, prefix) {
        this._parent = _parent;
        this._prefix = '';
        if (_parent) {
            if (prefix) {
                if (!Array.isArray(prefix)) {
                    prefix = [prefix];
                }
                this._prefix = '[' + prefix.join('') + ']';
            }
        }
        else {
            this._parent = {
                getPrefix() {
                    return '[' + getTime() + ']';
                }
            };
        }
    }
    log(...messages) {
        console.log(this.getPrefix(), ...messages.map(setColorMap), reset);
    }
    info(...messages) {
        console.info(this.getPrefix(), ...messages.map(setColorMap), reset);
    }
    warn(...messages) {
        console.warn(this.getPrefix(), ...messages.map(setColorMap), reset);
    }
    error(...messages) {
        console.error(this.getPrefix(), ...messages.map(setColorMap), reset);
    }
    group(...messages) {
        console.group(this.getPrefix(), ...messages.map(setColorMap), reset);
    }
    groupEnd() {
        console.groupEnd();
    }
    child(prefix) {
        return new LogRoot(this, prefix);
    }
    getPrefix() {
        return this._parent.getPrefix() + this._prefix;
    }
    title(message) {
        console.log('\n', '\n', message, getLine('=', message.length));
    }
}
exports.LogRoot = LogRoot;
function setColorMap(message) {
    if (typeof message !== 'string') {
        return message;
    }
    const arrowed = message.match(_colorArrow);
    return arrowed ?
        getColors(arrowed[1]) :
        message.replace(_colorWrap, setColor);
}
function setColor(substring, colors, value) {
    return getColors(colors) + value + $colors.reset;
}
function getColors(colors) {
    return colors.split('.').map(getColorMap).join('');
}
function getColorMap(color) {
    return $colors[color] || $colors.reset;
}
const $lines = {};
function getLine(char, size) {
    if (!$lines[char]) {
        $lines[char] = {};
    }
    if (!$lines[char][size]) {
        let line = '';
        while (size-- > 0) {
            line += char;
        }
        $lines[char][size] = '\n' + line + '\n';
    }
    return $lines[char][size];
}
function getTime() {
    const date = new Date;
    return [
        date.getHours(),
        date.getMinutes(),
        date.getSeconds()
    ]
        .map(zerofill)
        .join(':');
}
function zerofill(value) {
    return value < 10 ?
        '0' + value :
        value;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,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IiwiZmlsZSI6ImxvZy1yb290LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtMb2d9IGZyb20gXCIuL2xvZ1wiO1xyXG5cclxuY29uc3QgJGNvbG9ycyA9IHtcclxuICAgIHJlc2V0OiAnXFx4MWJbMG0nLFxyXG4gICAgYnJpZ2h0OiAnXFx4MWJbMW0nLFxyXG4gICAgZGltOiAnXFx4MWJbMm0nLFxyXG4gICAgdW5kZXJzY29yZTogJ1xceDFiWzRtJyxcclxuICAgIGJsaW5rOiAnXFx4MWJbNW0nLFxyXG4gICAgcmV2ZXJzZTogJ1xceDFiWzdtJyxcclxuICAgIGhpZGRlbjogJ1xceDFiWzhtJyxcclxuICAgIGJsYWNrOiAnXFx4MWJbMzBtJyxcclxuICAgIHJlZDogJ1xceDFiWzMxbScsXHJcbiAgICBncmVlbjogJ1xceDFiWzMybScsXHJcbiAgICB5ZWxsb3c6ICdcXHgxYlszM20nLFxyXG4gICAgYmx1ZTogJ1xceDFiWzM0bScsXHJcbiAgICBtYWdlbnRhOiAnXFx4MWJbMzVtJyxcclxuICAgIGN5YW46ICdcXHgxYlszNm0nLFxyXG4gICAgd2hpdGU6ICdcXHgxYlszN20nLFxyXG4gICAgYmdCbGFjazogJ1xceDFiWzQwbScsXHJcbiAgICBiZ1JlZDogJ1xceDFiWzQxbScsXHJcbiAgICBiZ0dyZWVuOiAnXFx4MWJbNDJtJyxcclxuICAgIGJnWWVsbG93OiAnXFx4MWJbNDNtJyxcclxuICAgIGJnQmx1ZTogJ1xceDFiWzQ0bScsXHJcbiAgICBiZ01hZ2VudGE6ICdcXHgxYls0NW0nLFxyXG4gICAgYmdDeWFuOiAnXFx4MWJbNDZtJyxcclxuICAgIGJnV2hpdGU6ICdcXHgxYls0N20nXHJcbn07XHJcblxyXG5jb25zdCB7cmVzZXR9ID0gJGNvbG9ycztcclxuXHJcbmNvbnN0IF9jb2xvcldyYXAgPSAvXFwoKFthLXouXSspOiguKylcXCkvZztcclxuY29uc3QgX2NvbG9yQXJyb3cgPSAvXihbYS16Ll0rKT0+JC87XHJcblxyXG5leHBvcnQgY2xhc3MgTG9nUm9vdCBpbXBsZW1lbnRzIExvZyB7XHJcbiAgICBfcHJlZml4ID0gJyc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3BhcmVudD86IExvZywgcHJlZml4Pzogc3RyaW5nIHwgc3RyaW5nW10pO1xyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIF9wYXJlbnQsIHByZWZpeCkge1xyXG4gICAgICAgIGlmIChfcGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcmVmaXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gW3ByZWZpeF07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJlZml4ID0gJ1snICsgcHJlZml4LmpvaW4oJycpICsgJ10nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHtcclxuICAgICAgICAgICAgICAgIGdldFByZWZpeCgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1snICsgZ2V0VGltZSgpICsgJ10nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZyguLi5tZXNzYWdlcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ2V0UHJlZml4KCksIC4uLm1lc3NhZ2VzLm1hcChzZXRDb2xvck1hcCksIHJlc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBpbmZvKC4uLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKHRoaXMuZ2V0UHJlZml4KCksIC4uLm1lc3NhZ2VzLm1hcChzZXRDb2xvck1hcCksIHJlc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICB3YXJuKC4uLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKHRoaXMuZ2V0UHJlZml4KCksIC4uLm1lc3NhZ2VzLm1hcChzZXRDb2xvck1hcCksIHJlc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBlcnJvciguLi5tZXNzYWdlcykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5nZXRQcmVmaXgoKSwgLi4ubWVzc2FnZXMubWFwKHNldENvbG9yTWFwKSwgcmVzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdyb3VwKC4uLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgY29uc29sZS5ncm91cCh0aGlzLmdldFByZWZpeCgpLCAuLi5tZXNzYWdlcy5tYXAoc2V0Q29sb3JNYXApLCByZXNldCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ3JvdXBFbmQoKSB7XHJcbiAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoaWxkKHByZWZpeDogc3RyaW5nIHwgc3RyaW5nW10pIHtcclxuICAgICAgICByZXR1cm4gbmV3IExvZ1Jvb3QodGhpcywgcHJlZml4KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmVmaXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudC5nZXRQcmVmaXgoKSArIHRoaXMuX3ByZWZpeDtcclxuICAgIH1cclxuXHJcbiAgICB0aXRsZShtZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICdcXG4nLFxyXG4gICAgICAgICAgICAnXFxuJyxcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgZ2V0TGluZSgnPScsIG1lc3NhZ2UubGVuZ3RoKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldENvbG9yTWFwKG1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZztcclxuZnVuY3Rpb24gc2V0Q29sb3JNYXAobWVzc2FnZSkge1xyXG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXJyb3dlZCA9IG1lc3NhZ2UubWF0Y2goX2NvbG9yQXJyb3cpO1xyXG4gICAgcmV0dXJuIGFycm93ZWQgP1xyXG4gICAgICAgIGdldENvbG9ycyhhcnJvd2VkWzFdKSA6XHJcbiAgICAgICAgbWVzc2FnZS5yZXBsYWNlKF9jb2xvcldyYXAsIHNldENvbG9yKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q29sb3Ioc3Vic3RyaW5nOiBzdHJpbmcsIGNvbG9yczogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nO1xyXG5mdW5jdGlvbiBzZXRDb2xvcihzdWJzdHJpbmcsIGNvbG9ycywgdmFsdWUpIHtcclxuICAgIHJldHVybiBnZXRDb2xvcnMoY29sb3JzKSArIHZhbHVlICsgJGNvbG9ycy5yZXNldDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29sb3JzKGNvbG9yczogc3RyaW5nKTogc3RyaW5nO1xyXG5mdW5jdGlvbiBnZXRDb2xvcnMoY29sb3JzKSB7XHJcbiAgICByZXR1cm4gY29sb3JzLnNwbGl0KCcuJykubWFwKGdldENvbG9yTWFwKS5qb2luKCcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29sb3JNYXAoY29sb3I6IHN0cmluZyk6IHN0cmluZztcclxuZnVuY3Rpb24gZ2V0Q29sb3JNYXAoY29sb3IpIHtcclxuICAgIHJldHVybiAkY29sb3JzW2NvbG9yXSB8fCAkY29sb3JzLnJlc2V0O1xyXG59XHJcblxyXG5jb25zdCAkbGluZXM6IHtcclxuICAgIFtrZXk6IHN0cmluZ106IHtcclxuICAgICAgICBba2V5OiBudW1iZXJdOiBzdHJpbmdcclxuICAgIH1cclxufVxyXG4gICAgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGdldExpbmUoY2hhcjogc3RyaW5nLCBzaXplOiBudW1iZXIpOiBzdHJpbmc7XHJcbmZ1bmN0aW9uIGdldExpbmUoY2hhciwgc2l6ZSkge1xyXG4gICAgaWYgKCEkbGluZXNbY2hhcl0pIHtcclxuICAgICAgICAkbGluZXNbY2hhcl0gPSB7fTtcclxuICAgIH1cclxuICAgIGlmICghJGxpbmVzW2NoYXJdW3NpemVdKSB7XHJcbiAgICAgICAgbGV0IGxpbmUgPSAnJztcclxuICAgICAgICB3aGlsZSAoc2l6ZS0tID4gMCkge1xyXG4gICAgICAgICAgICBsaW5lICs9IGNoYXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRsaW5lc1tjaGFyXVtzaXplXSA9ICdcXG4nICsgbGluZSArICdcXG4nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICRsaW5lc1tjaGFyXVtzaXplXTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGltZSgpIHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgIGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgIGRhdGUuZ2V0U2Vjb25kcygpXHJcbiAgICBdXHJcbiAgICAgICAgLm1hcCh6ZXJvZmlsbClcclxuICAgICAgICAuam9pbignOicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB6ZXJvZmlsbCh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHwgbnVtYmVyO1xyXG5mdW5jdGlvbiB6ZXJvZmlsbCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlIDwgMTAgP1xyXG4gICAgICAgICcwJyArIHZhbHVlIDpcclxuICAgICAgICB2YWx1ZTtcclxufVxyXG4iXX0=
